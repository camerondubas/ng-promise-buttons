"use strict"
Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=angular.module("promiseButtons",[]).directive("promiseButton",["promiseButtons","$parse","$timeout",function(n,t,e){return{restrict:"EA",scope:{promiseButtonOptions:"=?"},link:function(r,s,i){var a="click",o="ngClick",u="submit",l="ngSubmit",d=n.config,c=void 0,f=function(n){d.btnLoadingClass&&!d.addClassToCurrentBtnOnly&&n.addClass(d.btnLoadingClass),d.disableBtn&&!d.disableCurrentBtnOnly&&n.attr("disabled","disabled")},b=function(n){d.btnLoadingClass&&n.removeClass(d.btnLoadingClass),d.disableBtn&&n.removeAttr("disabled")},C=function(n,t){b(n)
var r=t?d.btnRejectedClass:d.btnResolvedClass
n.addClass(r),e(function(){return n.removeClass(r)},d.resultMessageLength)},g=function(n,t){r.$watch(n,function(n){if(!n)return!1
var e=n.then?n:n.$promise||void 0
e&&(f(t),e.then(function(){return C(t,!1)},function(){return C(t,!0)}))})},p=function(n){d.addClassToCurrentBtnOnly&&n.on(a,function(){return n.addClass(d.btnLoadingClass)}),d.disableCurrentBtnOnly&&n.on(a,function(){return n.attr("disabled","disabled")})},v=function(n,e,a){r.$evalAsync(function(){s.unbind(n),s.bind(n,function(){return r.$apply(function(){i[e].split(";").map(function(n){return t(n)}).forEach(function(t){c||!function(){var e=t(r.$parent,{$event:n})
c=g(function(){return e},a)}()})})})})},m=function(n){for(var t=[],e=n.find("button"),r=0;r<e.length;r++){var s=e[r]
"submit"===angular.element(s).attr("type")&&t.push(s)}return angular.element(t)}
if(i.hasOwnProperty(o))p(s),v(a,o,s)
else if(i.hasOwnProperty(l)){var B=m(s)
p(B),v(u,l,B)}r.$watch("promiseButtonOptions",function(n){angular.isObject(n)&&(d=angular.extend({},d,n))},!0)}}}]).provider("promiseButton",function(){var n={disableBtn:!0,btnLoadingClass:"is-loading",btnResolvedClass:"is-resolved",btnRejectedClass:"is-rejected",resultMessageLength:1500,addClassToCurrentBtnOnly:!1,disableCurrentBtnOnly:!1}
return{extendConfig:function(t){return n=angular.extend(n,t)},$get:function(){return{config:n}}}}).name





